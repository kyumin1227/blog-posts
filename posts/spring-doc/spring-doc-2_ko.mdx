---
title: Spring Doc을 이용한 API 문서 자동화 2
date: 2025-10-11
description: Spring Doc (Open Api)을 이용하여 생성한 API 문서를 자동으로 배포하는 방법에 대해 소개합니다.
coverImage: https://github.com/kyumin1227/blog-posts/blob/main/images/spring-doc-2/Cover%20Image.png?raw=true
visible: true
tags:
  - spring
  - swagger
  - spring doc
  - ci
  - github actions
---

# 개요

이전 포스트에서는 SpringDoc을 이용하여 자바 코드상에서 Swagger의 문서를 작성하는 방법을 설명했습니다.

> [https://www.kyumin.dev/ko/posts/spring-doc/spring-doc](https://www.kyumin.dev/ko/posts/spring-doc/spring-doc)

해당 방법으로 문서를 생성하고 볼 수 있지만, **애플리케이션 서버가 실행 중일 때만** 문서를 볼 수 있다는 **제약**이 있습니다. 따라서 최신 문서를 확인하려면 아래와 같은 작업이 필요합니다.

1. 깃허브에서 가장 최신의 코드를 가져옵니다.
2. 서버와의 연결을 위해 로컬에서 데이터베이스를 구동합니다.
3. 서버 구동에 필요한 환경변수를 설정합니다.
4. 애플리케이션 서버를 실행하여 문서를 확인합니다.

단순히 최신 API 문서를 보고 싶을 뿐인데, 위와 같은 번거러운 작업들이 이루어져야 하기 때문에 Spring Doc으로 생성한 Swagger 문서 확인은 추가적인 수고를 요구합니다.

반면 [Postman](https://www.postman.com/)의 경우에는 API의 변경 사항은 코드와 별개로 수동으로 수정할 필요가 있으나, 문서화와 배포가 간단하여 한번 작성해둘 경우 인터넷만 연결되어 있다면 링크만으로 어디서든 최신의 문서를 볼수있다는 장점이 있습니다.

[Swagger](https://swagger.io/) 또한 별도로 배포를 진행하는 기능은 있으나 코드 수정 시 직접 JSON 파일을 가져와서 import를 해야 하는 작업이 필요했습니다.
때문에 더 효율적인 CI 환경 구축을 위해 Github Actions를 이용하여 직접 배포를 구축하게 되었습니다.

# 구현

## Swagger UI의준비

Swagger의 문서를 동적으로 생성하기 위해서는 우선 아래의 링크에서 Swagger UI의 소스코드를 다운로드 합니다.

> [https://github.com/swagger-api/swagger-ui](https://github.com/swagger-api/swagger-ui)

이중 `dist` 내부의 파일을 프로젝트의 폴더로 이동시킵니다.
(필자의 경우 프로젝트 루트에 별도의 `docs` 폴더를 생성하였습니다.)

이후 `swagger.json` 파일을 추가 후, `swagger-initializer.js` 파일 6번 라인의 `url` 부분을 아까 생성한 `./swagger.json`으로 변경해줍니다.
(여기서는 `./swagger.json` 으로 변경하였으나 생성한 파일과 이름이 같으면 상관 없으며, 이는 Github Action의 워크플로우에서 입력하는 파일 명과 동일해야합니다.)

<img
  src="https://github.com/kyumin1227/blog-posts/blob/main/images/spring-doc-2/1.png?raw=true"
  alt="swagger ui 파일"
  max-width="100%"
  height="auto"
/>

<br>

```javascript
window.onload = function () {
  //<editor-fold desc="Changeable Configuration Block">

  // the following lines will be replaced by docker/configurator, when it runs in a docker-container
  window.ui = SwaggerUIBundle({
    url: "./swagger.json",
    dom_id: "#swagger-ui",
    deepLinking: true,
    presets: [SwaggerUIBundle.presets.apis, SwaggerUIStandalonePreset],
    plugins: [SwaggerUIBundle.plugins.DownloadUrl],
    layout: "StandaloneLayout",
  });

  //</editor-fold>
};
```

설정 후 `index.html` 파일을 열어 아래의 화면이 나오면 Swagger UI의 준비는 완료입니다.

<img
  src="https://github.com/kyumin1227/blog-posts/blob/main/images/spring-doc-2/2.png?raw=true"
  alt="Swagger ui 접속"
  max-width="100%"
  height="auto"
/>

## 워크플로우 구현

워크플로우의 목표는 Runner 내부에서 서버를 빌드 및 실행시킨후 생성된 Swagger 문서의 JSON을 저장하는것이며, 저장시에는 메인 브랜치에 커밋이 추가되지 않도록 Github Actions를 사용하여 `swagger-docs` 브랜치를 생성하여 저장합니다.

우선 Github Actions를 사용하기위해 프로젝트 루트에 `.github/workflows` 폴더를 생성하여 프로젝트를 빌드 및 실행하는 코드를 작성 후 아래의 코드를 추가합니다.
(서버의 포트 설정, 위에서 생성한 폴더와 파일의 이름에 따라서 코드는 유연하게 수정해주세요)

```yaml
프로젝트에 맞게 서버 빌드 및 실행

...

- name: Wait for server
run: |
  echo "Waiting for Spring Boot to start..."
  timeout 60s bash -c 'until curl -f http://localhost:8080/actuator/health | grep -q UP; do sleep 3; done'

- name: Download Swagger JSON
run: |
  mkdir -p docs
  curl http://localhost:8080/v3/api-docs -o docs/swagger.json

- name: Switch to swagger-docs branch
run: |
  git fetch origin
  git checkout -B swagger-docs origin/swagger-docs || git checkout -b swagger-docs

- name: Commit & Push docs
run: |
  git config --global user.name 'github-actions'
  git config --global user.email 'actions@github.com'
  git add docs
  if git diff --cached --quiet; then
	echo "No changes to commit"
	exit 0
  fi
  git commit -m "Update Swagger UI"
  git push --force origin swagger-docs

```

저장소에서 워크플로우를 실행 시킨 후 브랜치의 생성과 위에서 만든 `docs/swagger.json` 파일에 내용이 올바르게 추가되었는지 확인해주세요

## 배포

Swagger UI는 정적 페이지이기에 배포는 `GitHub Pages`를 이용합니다.

리포지토리의 Settings -> Pages 에 이동하여 위에서 생성한 브랜치, 폴더를 선택 후 Save를 누릅니다.

<img
  src="https://github.com/kyumin1227/blog-posts/blob/main/images/spring-doc-2/3.png?raw=true"
  alt="pages 배포 선택"
  max-width="100%"
  height="auto"
/>

최대 10분 정도 기다리면 아래와 같이 페이지 배포가 완료됩니다.

<img
  src="https://github.com/kyumin1227/blog-posts/blob/main/images/spring-doc-2/4.png?raw=true"
  alt="pages 배포 완료"
  max-width="100%"
  height="auto"
/>

페이지에 접속하여 확인하면, 작성했던 API의 문서가 배포된것을 확인할 수 있습니다.

<img
  src="https://github.com/kyumin1227/blog-posts/blob/main/images/spring-doc-2/5.png?raw=true"
  alt="Swagger 문서 배포"
  max-width="100%"
  height="auto"
/>

## 버전관리

만약 특정 버전의 문서를 저장할 필요가 있다면, 보존할 버전의 JSON 파일을 `swgger.json`과는 별개의 이름으로 저장 후 `swagger-initializer.js` 의 url을 아래와 같이 변경해줍니다.

(이 포스트에서는 `swagger1.json` 이름의 파일 생성)

```javascript
...

urls: [
    {url: "./swagger.json", name: "LATEST API"},
  {url: "./swagger1.json", name: "API v1"}  // 추가한 파일의 경로 기재
],

...
```

배포된 문서는 우상단에서 선택 가능합니다.

<img
  src="https://github.com/kyumin1227/blog-posts/blob/main/images/spring-doc-2/6.png?raw=true"
  alt="Swagger 버전 선택"
  max-width="100%"
  height="auto"
/>

---

# 결론

본 포스트를 통해 Spring Boot 환경에서 생성된 Swagger 문서(JSON)를 GitHub Actions 워크플로우를 이용해 추출하고, 이를 GitHub Pages를 통해 최종 사용자에게 정적 문서 형태로 배포하는 CI 환경을 구축했습니다.

이를 사용하면 개발자는 수동으로 서버를 실행할 필요 없이 깃허브의 코드와 동일한 최신의 API 문서를 어디서든 웹 링크를 통해 확인할 수 있게 됩니다.
